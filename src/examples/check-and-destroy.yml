description: |
  Destroy environment with Terraform.
  â€» Please pay attention to this operation.

usage:
  version: 2.1

  orbs:
    terraform: mafuyuk/terraform@0.6.1

  workflows:
    destroy:
      jobs:
        # execute "terraform plan"
        - terraform/plan:
            is-destroy: true
        # check plan file
        - hold:
            type: approval
            requires:
              - terraform/plan
        # execute "terraform plan" with plan file
        - terraform/apply:
            requires:
              - hold
